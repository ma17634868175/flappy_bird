!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);class s{constructor(e,t,i,s,n,r,h){this.width=e,this.height=t,this.xAxis=i,this.yAxis=s,this.xSpeed=n,this.ySpeed=r,this.dom=h}render(){this.dom.style.width=`${this.width}px`,this.dom.style.height=`${this.height}px`,this.dom.style.top=`${this.yAxis}px`,this.dom.style.left=`${this.xAxis}px`}runing(e){this.xAxis+=this.xSpeed*e,this.yAxis+=this.ySpeed*e,this.onRuning&&this.onRuning(),this.render()}}let n=document.getElementsByClassName("sky")[0];class r extends s{constructor(e){super(n.offsetWidth,n.offsetHeight,n.offsetLeft,n.offsetTop,e,0,n)}runing(e){super.runing(e),Math.abs(this.xAxis)>=n.offsetWidth/2&&(this.xAxis=0)}}let h=document.getElementsByClassName("land")[0];class o extends s{constructor(e){super(h.offsetWidth,h.offsetHeight,h.offsetLeft,h.offsetTop,e,0,h)}runing(e){super.runing(e),Math.abs(this.xAxis)>=h.offsetWidth/2&&(this.xAxis=0)}}let a=document.getElementsByClassName("sky")[0],l=document.getElementsByClassName("land")[0],p=document.getElementsByClassName("bird")[0];class u extends s{constructor(e){super(p.offsetWidth,p.offsetHeight,p.offsetLeft,p.offsetTop,0,e,p),this.addSpeed=2e3,this.num=1,this.wavingTimer=null}newSpeed(e){this.ySpeed+=this.addSpeed*e}onRuning(){let e=a.offsetHeight-l.offsetHeight-p.offsetHeight;this.yAxis<0?this.yAxis=0:this.yAxis>e&&(this.yAxis=e)}jump(e){this.ySpeed=e}startWavingWing(){this.wavingTimer||(this.wavingTimer=setInterval(()=>{this.num++;let e=this.num%3+1;this.dom.className=`bird bird_fly${e}`},100))}stopWavingWing(){clearInterval(this.wavingTimer),this.wavingTimer=null}runing(e){this.newSpeed(e),super.runing(e)}}let d=document.getElementsByClassName("background")[0],m=document.getElementsByClassName("sky")[0],c=document.getElementsByClassName("land")[0],f=document.getElementsByClassName("pipeUp")[0];class g extends s{constructor(e,t,i,s,n){super(f.offsetWidth,e,t,i,s,0,n),this.PipeArr=[],this.pipeTimer=null}}class y{constructor(){this.pipeUp=null,this.pipeDown=null,this.content=m.offsetHeight-c.offsetHeight,this.clearance=.3*this.content,this.maxHeight=.6*this.content,this.minHeight=.1*this.content}createPipe(e){let t=this.createDiv("pipeUp"),i=this.createDiv("pipeDown");d.appendChild(t),d.appendChild(i);let s=this.randomHeight();this.pipeUp=new g(s.up,m.offsetWidth/2,this.content-s.up,e,t),this.pipeDown=new g(s.down,m.offsetWidth/2,0,e,i)}createDiv(e){let t=document.createElement("div");return t.className=e,t}randomHeight(){let e=null,t=null;return t=Math.floor(Math.random()*(this.maxHeight-this.minHeight)+this.minHeight),e=m.offsetHeight-c.offsetHeight-t-this.clearance,{up:e,down:t}}isOver(){return this.pipeUp.xAxis<-this.pipeUp.width}runing(e){this.pipeUp.runing(e),this.pipeDown.runing(e)}}class x{constructor(e,t){this.xSpeed=t,this.interval=e,this.productionTimer=null,this.allPipe=[]}stratProduction(){this.productionTimer||(this.productionTimer=setInterval(()=>{let e=new y;e.createPipe(this.xSpeed),this.allPipe.push(e),this.removePipe()},this.interval))}stopProduction(){clearInterval(this.productionTimer),this.productionTimer=null}removePipe(){this.allPipe.forEach((e,t,i)=>{e.isOver()&&(i.splice(t,1),d.removeChild(e.pipeUp.dom),d.removeChild(e.pipeDown.dom))})}}let v=document.getElementsByClassName("gameOver")[0];class b{constructor(e){this.frame=e,this.gameTimer=null,this.sky=new r(-40),this.land=new o(-180),this.bird=new u(1),this.productionPipeDouble=new x(2e3,-180),this.isGameOver=!1,this.keyEvent()}startGame(){this.isGameOver&&this.restartGame(),this.gameTimer||(this.isGameOver=!1,this.bird.startWavingWing(),this.productionPipeDouble.stratProduction(),this.gameTimer=setInterval(()=>{this.sky.runing(1/this.frame),this.land.runing(1/this.frame),this.bird.runing(1/this.frame),this.productionPipeDouble.allPipe.forEach(e=>{e.runing(1/this.frame)}),this.determineGame()},1e3/this.frame))}stopGame(){this.bird.stopWavingWing(),this.productionPipeDouble.stopProduction(),clearInterval(this.gameTimer),this.gameTimer=null}restartGame(){v.style.opacity=0,location.reload()}keyEvent(){document.onkeydown=e=>{" "==e.key?this.bird.jump(-750):"Enter"===e.key&&(this.gameTimer?this.stopGame():this.startGame())}}determineGame(){(this.bird.yAxis<=0||this.bird.yAxis+this.bird.height>=this.land.yAxis||this.pipeDetermine())&&(this.stopGame(),this.isGameOver=!0,v.style.opacity=1)}pipeDetermine(){let e=this.productionPipeDouble.allPipe,t=e.length;for(let s=0;s<t;s++)if(i(this.bird,e[s].pipeDown)||i(this.bird,e[s].pipeUp))return!0;return!1;function i(e,t){let i=e.xAxis+e.width/2,s=e.yAxis+e.height/2,n=t.xAxis+t.width/2,r=t.yAxis+t.height/2,h=Math.abs(i-n),o=Math.abs(s-r);return h<(e.width+t.width)/2&&o<(e.height+t.height)/2}}}new b(60);t.default={Game:b}}]);